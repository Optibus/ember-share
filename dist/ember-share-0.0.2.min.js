!function(a){var b,c;!function(){var a={},d={};b=function(b,c,d){a[b]={deps:c,callback:d}},c=function(b){function e(a){if("."!==a.charAt(0))return a;for(var c=a.split("/"),d=b.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(d[b])return d[b];if(d[b]={},!a[b])throw new Error("Could not find module "+b);for(var f,g=a[b],h=g.deps,i=g.callback,j=[],k=0,l=h.length;l>k;k++)j.push("exports"===h[k]?f={}:c(e(h[k])));var m=i.apply(this,j);return d[b]=f||m},c.entries=a}(),b("ember-share",["ember-share/mixins/share-text","ember-share/models/share-proxy","ember-share/models/share-array","ember-share/store","ember-share/utils","exports"],function(a,b,c,d,e,f){"use strict";var g=a["default"],h=b["default"],i=c["default"],j=d["default"],k=e["default"];f.ShareTextMixin=g,f.ShareProxy=h,f.ShareArray=i,f.Store=j,f.Utils=k}),b("ember-share/mixins/share-text",["../utils","exports"],function(a,b){"use strict";var c=(a.isArray,a.diff);b["default"]=Ember.Mixin.create({textKeys:[],triggerEvents:!1,textEvents:function(){this._textContexts=new Array(this.textKeys.length),this._handlers=new Array(2*this._textContexts.length);for(var a=0;a<this.textKeys.length;a++){var b=this.textKeys[a],c=this._context.createContextAt([b]);this._handlers[b]=new Array(2),this._handlers[b].push(c.on("insert",Ember.run.bind(this,this.handleInsert,b))),this._handlers[b].push(c.on("delete",Ember.run.bind(this,this.handleDelete,b))),this._textContexts[b]=c}}.on("init"),setUnknownProperty:function(a,b){this.textKeys.indexOf(a)>=0?this.textOp(a,b):this._super(a,b)},textOp:function(a,b){if(void 0!==this._context.get()){this.propertyWillChange(a);var d=c.diff(this._cache[a]||"",b.replace(/\r\n/g,"\n"));this._cache[a]=b.replace(/\r\n/g,"\n");for(var e=0,f=0;f<d.length;f++)d[f].added?this._context.insert([a,e],d[f].value):d[f].removed&&this._context.remove([a,e],d[f].value.length),e+=d[f].value.length;this.propertyDidChange(a)}},handleInsert:function(a,b,c){this.propertyWillChange(a),void 0===this._cache[a]&&this.get(a);var d=this._cache[a].slice(0,b)+c+this._cache[a].slice(b);this._cache[a]=d,this.triggerEvents&&this.trigger("textInsert",b,c),this.propertyDidChange(a)},handleDelete:function(a,b,c){void 0===this._cache[a]&&this.get(a),this.propertyWillChange(a);var d=c.length,e=this._cache[a].slice(0,b)+this._cache[a].slice(b+d);this._cache[a]=e,this.triggerEvents&&this.trigger("textDelete",b,c),this.propertyDidChange(a)},willDestroy:function(){for(var a in this._textContexts)this._textContexts[a].removeListener(this._handlers[a][0]),this._textContexts[a].removeListener(this._handlers[a][1]),this._textContexts[a].destroy();this._super()}})}),b("ember-share/models/share-array",["./share-proxy","exports"],function(a,b){"use strict";a["default"];b["default"]=Ember.Object.extend(Ember.MutableArray,{_context:null,_cache:null,itemType:"share-proxy",init:function(){this._cache=[],this._factory=this.container.lookupFactory("model:"+this.itemType);var a=this;this._context.on("delete",function(b){a.arrayContentWillChange(b,1,0),a._cache.splice(b,1);var c=a._context.path.length;a._cache.forEach(function(a,b){a._context.path[c]=b}),a.arrayContentDidChange(b,1,0)}),this._context.on("insert",function(b){a.arrayContentWillChange(b,0,1);var c=a._factory.create({_context:a._context.createContextAt(b)});a._cache.splice(b,0,c);var d=a._context.path.length;a._cache.forEach(function(a,b){a._context.path[d]=b}),a.arrayContentDidChange(b,0,1)})},length:function(){return this._context.get().length}.property().volatile(),objectAt:function(a){return void 0===this._cache[a]&&void 0!==this._context.get(a)&&(this._cache[a]=this._factory.create({id:this._context.get(a).id,_context:this._context.createContextAt(a)})),this._cache[a]},replace:function(a,b,c){var d=c.length,e=new Array(d+2);e[0]=a,e[1]=b,this.arrayContentWillChange(a,b,d),b>0&&this._context.remove([a],b);for(var f=0;d>f;f++)this._context.insert([a+f],c[f]),e[2+f]=this._factory.create({id:c[f].id,_context:this._context.createContextAt(a+f)});this._cache.splice.apply(this._cache,e),this.arrayContentDidChange(a,b,d)},toJSON:function(){return this._context.get()}})}),b("ember-share/models/share-proxy",["exports"],function(a){"use strict";var b=Array.isArray||function(a){return a instanceof Array};a["default"]=Ember.Object.extend({_context:null,_cache:null,init:function(){this._cache={};var a=this;this._context.on("replace",function(b,c,d){a.propertyWillChange(b),a._cache[b]=a.wrapObject(b,d),a.propertyDidChange(b)}),this._context.on("insert",function(b,c){a.propertyWillChange(b),a._cache[b]=a.wrapObject(b,c),a.propertyDidChange(b)}),this._context.on("child op",function(b,c){1===b.length&&c.na&&(a.propertyWillChange(b[0]),a._cache[b]=(a._cache[b[0]]||a.get(b[0])||0)+c.na,a.propertyDidChange(b[0]))})},unknownProperty:function(a){var b=this._cache[a];return void 0===b&&(b=this._cache[a]=this.wrapObject(a,this._context.get([a]))),b},setUnknownProperty:function(a,b){this._cache[a]!==b&&(this.propertyWillChange(a),this._cache[a]=this.wrapObject(a,b),this._context.set([a],b),this.propertyDidChange(a))},wrapObject:function(a,b){if(null!==b&&"object"==typeof b){var c=this.wrapLookup(a,b),d=this.container.lookupFactory("model:"+c);return d.create({_context:this._context.createContextAt(a)})}return b},wrapLookup:function(a,c){return c.type||(b(c)?"share-array":"share-proxy")},willDestroy:function(){this._cache=null,this._context.destroy(),this._context=null},toJSON:function(){return this._context.get()},incrementProperty:function(a,b){return Ember.isNone(b)&&(b=1),Ember.assert("Must pass a numeric value to incrementProperty",!isNaN(parseFloat(b))&&isFinite(b)),this.propertyWillChange(a),this._cache[a]=(this._cache[a]||this.get(a)||0)+b,void 0!==this._context.get([a])?this._context.add([a],b):this._context.set([a],this._cache[a]),this.propertyDidChange(a),this._cache[a]},decrementProperty:function(a,b){return Ember.isNone(b)&&(b=1),Ember.assert("Must pass a numeric value to decrementProperty",!isNaN(parseFloat(b))&&isFinite(b)),this.propertyWillChange(a),this._cache[a]=(this._cache[a]||this.get(a)||0)-b,void 0!==this._context.get([a])?this._context.add([a],-1*b):this._context.set([a],this._cache[a]),this.propertyDidChange(a),this._cache[a]}})}),b("ember-share/store",["./utils","exports"],function(a,b){"use strict";var c=a.guid,d=a.patchShare,e=Ember.RSVP.Promise;b["default"]=Ember.Object.extend({socket:null,connection:null,url:"http://"+window.location.hostname,init:function(){this.checkConnection=Ember.Deferred.create({});var a=this;this.beforeConnect?this.beforeConnect().then(function(){Ember.sendEvent(a,"connect")}):Ember.sendEvent(this,"connect")},doConnect:function(){var a=this;if(!window.sharejs)throw new Error("ShareJS client not included");if(window.BCSocket)this.socket=new BCSocket(this.get("url"),{reconnect:!0}),this.socket.onerror=function(b){Ember.sendEvent(a,"connectionError",[b])},this.socket.onopen=function(){a.checkConnection.resolve(),Ember.sendEvent(a,"connectionOpen")},this.socket.onclose=function(){Ember.sendEvent(a,"connectionEnd")};else{if(!window.Primus)throw new Error("No Socket library included");d(),this.socket=new Primus(this.get("url")),this.socket.on("error",function(b){Ember.sendEvent(a,"connectionError",[b])}),this.socket.on("open",function(){a.checkConnection.resolve(),Ember.sendEvent(a,"connectionOpen")}),this.socket.on("end",function(){Ember.sendEvent(a,"connectionEnd")})}this.connection=new sharejs.Connection(this.socket),this.cache={}}.on("connect"),find:function(a,b){var c=this;return this.checkConnection.then(function(){return c.findQuery(a,{_id:b}).then(function(a){return a[0]},function(a){return a})})},createRecord:function(a,b){var d=this;return d.checkConnection.then(function(){var f=d.connection.get(a,c());return e.all([d.whenReady(f).then(function(a){return d.create(a,b)}),d.subscribe(f)]).then(function(){return d._createModel(a,f)})})},deleteRecord:function(){},findQuery:function(a,b){var c=this;return this.checkConnection.then(function(){return new e(function(d,e){function f(b,f){return void 0!==b?e(b):void d(c._resolveModels(a,f))}c.connection.createFetchQuery(a,b,null,f)})})},findAll:function(){throw new Error("findAll not implemented")},_cacheFor:function(a){var b=this.cache[a];return void 0===b&&(this.cache[a]=b={}),b},_factoryFor:function(a){return this.container.lookupFactory("model:"+a)},_createModel:function(a,b){var c=this._cacheFor(a),d=this._factoryFor(a);if(d){var e=d.create({id:b.name,_context:b.createContext().createContextAt()});return c[b.name]=e,e}throw new Error("Cannot find model for "+a)},_resolveModel:function(a,b){var c=this._cacheFor(a),d=c[b.name];if(void 0!==d)return e.resolve(d);var f=this;return f.subscribe(b).then(function(b){return f._createModel(a,b)})},_resolveModels:function(a,b){for(var c=new Array(b.length),d=0;d<b.length;d++)c[d]=this._resolveModel(a,b[d]);return e.all(c)},whenReady:function(a){return"ready"===a.state?e.resolve(a):new e(function(b){a.whenReady(function(){Ember.run(null,b,a)})})},subscribe:function(a){return a.subscribed?e.resolve(a):new e(function(b,c){a.subscribe(function(d){void 0===d?Ember.run(null,b,a):Ember.run(null,c,d)})})},create:function(a,b){return new e(function(c,d){a.create("json0",b,function(b){void 0===b?Ember.run(null,c,a):Ember.run(null,d,b)})})}})}),b("ember-share/utils",["exports"],function(a){"use strict";function b(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}function c(a){return{newPos:a.newPos,components:a.components.slice(0)}}function d(){var a={};a[window.Primus.CLOSED]="disconnected",a[window.Primus.OPENING]="connecting",a[window.Primus.OPEN]="connected",window.sharejs.Connection.prototype.bindToSocket=function(b){function c(b){var c=a[b];d._setState(c)}var d=this;c(Primus.OPENING),c(b.readyState),this.canSend="connected"===this.state,this.socket={send:function(a){b.write(a)}},b.on("data",function(a){if(a.a)try{d.handleMessage(a)}catch(b){throw d.emit("error",b),b}}),b.on("readyStateChange",function(){c(b.readyState)}),b.on("reconnecting",function(){"disconnected"===d.state&&(c(Primus.OPENING),d.canSend=!1)})}}var e=function(a){this.ignoreWhitespace=a};e.prototype={diff:function(a,b){if(b===a)return[{value:b}];if(!b)return[{value:a,removed:!0}];if(!a)return[{value:b,added:!0}];b=this.tokenize(b),a=this.tokenize(a);var d=b.length,e=a.length,f=d+e,g=[{newPos:-1,components:[]}],h=this.extractCommon(g[0],b,a,0);if(g[0].newPos+1>=d&&h+1>=e)return g[0].components;for(var i=1;f>=i;i++)for(var j=-1*i;i>=j;j+=2){var k,l=g[j-1],m=g[j+1];h=(m?m.newPos:0)-j,l&&(g[j-1]=void 0);var n=l&&l.newPos+1<d,o=m&&h>=0&&e>h;if(n||o){if(!n||o&&l.newPos<m.newPos?(k=c(m),this.pushComponent(k.components,a[h],void 0,!0)):(k=c(l),k.newPos++,this.pushComponent(k.components,b[k.newPos],!0,void 0)),h=this.extractCommon(k,b,a,j),k.newPos+1>=d&&h+1>=e)return k.components;g[j]=k}else g[j]=void 0}},pushComponent:function(a,b,c,d){var e=a[a.length-1];e&&e.added===c&&e.removed===d?a[a.length-1]={value:this.join(e.value,b),added:c,removed:d}:a.push({value:b,added:c,removed:d})},extractCommon:function(a,b,c,d){for(var e=b.length,f=c.length,g=a.newPos,h=g-d;e>g+1&&f>h+1&&this.equals(b[g+1],c[h+1]);)g++,h++,this.pushComponent(a.components,b[g],void 0,void 0);return a.newPos=g,h},equals:function(a,b){var c=/\S/;return!this.ignoreWhitespace||c.test(a)||c.test(b)?a===b:!0},join:function(a,b){return a+b},tokenize:function(a){return a}};var f=Array.isArray||function(a){return a instanceof Array},g=new e(!1);a.guid=b,a.diff=g,a.isArray=f,a.patchShare=d}),a.EmberShare=c("ember-share")}(window);